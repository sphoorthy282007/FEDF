<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>Weather App</title>
<style>
body {
  font-family: Arial, sans-serif;
  text-align: center;
  margin: 50px;
  background: #f0f4f8;
}

.weather-box {
  margin-top: 20px;
  padding: 25px;
  display: inline-block;
  border-radius: 15px;
  background: #fff;
  box-shadow: 0 4px 12px rgba(0,0,0,0.2);
  min-width: 250px;
  transition: 0.3s;
}

.weather-box.sunny { background: #FFE57F; }
.weather-box.cloudy { background: #B0BEC5; color: #000; }
.weather-box.rainy { background: #81D4FA; color: #000; }
.weather-box.snowy { background: #E1F5FE; color: #000; }

input, button {
  padding: 10px;
  margin: 5px;
  border-radius: 5px;
  border: 1px solid #ccc;
  font-size: 16px;
}
button {
  background: #0077cc;
  color: white;
  cursor: pointer;
  transition: 0.3s;
}
button:hover {
  background: #005fa3;
}

.weather-icon {
  width: 60px;
  height: 60px;
  vertical-align: middle;
}
</style>
</head>
<body>
<h1>Weather App</h1>
<input type="text" id="cityInput" placeholder="Enter city name" />
<button id="getWeatherBtn">Get Weather</button>
<div id="weatherResult" class="weather-box"></div>

<script>
const cityInput = document.getElementById("cityInput");
const getWeatherBtn = document.getElementById("getWeatherBtn");
const weatherResult = document.getElementById("weatherResult");

async function fetchWeather(city) {
  try {
    if (!city) {
      weatherResult.innerHTML = "<p>Please enter a city name.</p>";
      weatherResult.className = "weather-box";
      return;
    }

    const response = await fetch(`https://wttr.in/${encodeURIComponent(city)}?format=j1`);
    if (!response.ok) throw new Error("City not found or API error.");

    const data = await response.json();
    displayWeather(city, data);
    localStorage.setItem("lastCity", city);

  } catch (error) {
    weatherResult.innerHTML = `<p style="color:red;">${error.message}</p>`;
    weatherResult.className = "weather-box";
  }
}

function displayWeather(city, data) {
  const current = data.current_condition[0];
  const condition = current.weatherDesc[0].value.toLowerCase();
  let weatherClass = "";
  let icon = "";

  if (condition.includes("sun") || condition.includes("clear")) {
    weatherClass = "sunny";
    icon = "‚òÄÔ∏è";
  } else if (condition.includes("cloud")) {
    weatherClass = "cloudy";
    icon = "‚òÅÔ∏è";
  } else if (condition.includes("rain") || condition.includes("drizzle")) {
    weatherClass = "rainy";
    icon = "üåßÔ∏è";
  } else if (condition.includes("snow")) {
    weatherClass = "snowy";
    icon = "‚ùÑÔ∏è";
  } else {
    weatherClass = "";
    icon = "üå°Ô∏è";
  }

  weatherResult.className = "weather-box " + weatherClass;
  weatherResult.innerHTML = `
    <h2>${city} ${icon}</h2>
    <p><strong>Temperature:</strong> ${current.temp_C} ¬∞C</p>
    <p><strong>Condition:</strong> ${current.weatherDesc[0].value}</p>
    <p><strong>Humidity:</strong> ${current.humidity}%</p>
    <p><strong>Feels Like:</strong> ${current.FeelsLikeC} ¬∞C</p>
  `;
}

getWeatherBtn.addEventListener("click", () => {
  const city = cityInput.value.trim();
  fetchWeather(city);
});

window.onload = () => {
  const lastCity = localStorage.getItem("lastCity");
  if (lastCity) fetchWeather(lastCity);
};
</script>
</body>
</html>
